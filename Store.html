<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store</title>
    <link rel="stylesheet" href="Stye.css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;1,400&display=swap" rel="stylesheet">
</head>

<body>

    <header class="header">
        <div class="container">

            <!----------------------------------------------------------------------------------------------------------------->
            <!-- LOGO -->
            <!----------------------------------------------------------------------------------------------------------------->

            <div id="logo">
                <a href="Home.html">
                    <img src="img/logo@4x.png" alt="" class="logo_normal">
                </a>
            </div>

            <!----------------------------------------------------------------------------------------------------------------->
            <!-- BUGRER MENU -->
            <!----------------------------------------------------------------------------------------------------------------->

            <div id="burger-menu" class="overlay">

                <span id="closebtn">&times;</span>

                <div class="burger-logo">
                    <img src="img/logo@4x.png">
                </div>

                <ul class="overlay-content">
                    <li><a href="Home.html">Home</a></li>
                    <li><a href="Store.html">Store</a></li>
                    <li><a href="Studio.html">Studio</a></li>
                    <li><a href="Story.html">Story</a></li>
                    <li><a href="#"><img src="img/shopping_card.png" alt=""></a></li>
                </ul>

            </div>

            <span id="openbtn">&#9776;</span>

            <!----------------------------------------------------------------------------------------------------------------->
            <!-- MAIN MENU -->
            <!----------------------------------------------------------------------------------------------------------------->

            <nav class="main-menu">
                <ul>
                    <li><a href="Home.html">Home</a></li>
                    <li><a href="Store.html">Store</a></li>
                    <li><a href="Studio.html">Studio</a></li>
                    <li><a href="Story.html">Story</a></li>
                    <li><a href="#"><img src="img/shopping_card.png" alt=""></a></li>
                </ul>
            </nav>

        </div>
    </header>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- SPLASH -->
    <!----------------------------------------------------------------------------------------------------------------->

    <div class="splash_2">
        <div class="sectionwrapper">
            <h2 class="sp_2">100% Organic cotton</h2>
            <h2 class="ps_2">0% Fabric waste</h2>
        </div>
    </div>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- NEW -->
    <!----------------------------------------------------------------------------------------------------------------->

    <h1 class="align-center">NEWEST</h1>

    <div class="new">
        <div class="column">
            <img src="img/aurora.PNG" alt="">
            <h3>AUROR DRESS</h3>
            <p>2.800,00 DKK</p>
        </div>

        <div class="column">
            <img src="img/navia.PNG" alt="">
            <h3>NAVIA DRESS</h3>
            <p>2.600,00 DKK</p>
        </div>

        <div class="column">
            <img src="img/ava.PNG" alt="">
            <h3>AVA DRESS</h3>
            <p>2.800,00 DKK</p>
        </div>

        <div class="column">
            <img src="img/mona.PNG" alt="">
            <h3>MONA DRESS</h3>
            <p>2.600,00 DKK</p>
        </div>
    </div>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- STORE TEXT -->
    <!----------------------------------------------------------------------------------------------------------------->

    <h1 class="align-center">OUR STORE</h1>
    <p class="brod_text">The collection is continual and trans-seasonal.</p>
    <p class="brod_text1">Each garment is consciously cut and crafted in Copenhagen.</p>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- FILTERNING -->
    <!----------------------------------------------------------------------------------------------------------------->

    <div class="nav">
        <button class="filter" data-kategori="all">ALL</button>
        <button class="filter" data-kategori="3">DRESSES</button>
        <button class="filter" data-kategori="4">JACKET</button>
        <button class="filter" data-kategori="5">BLAZERS</button>
    </div>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- TEMPLATE -->
    <!----------------------------------------------------------------------------------------------------------------->

    <section id="liste"></section>

    <template>
        <article class="toj">
            <img class="foto" src="" alt="">
            <h3 class="navn"></h3>
            <h4 class="pris"></h4>
        </article>
    </template>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- FOOTER -->
    <!----------------------------------------------------------------------------------------------------------------->

    <footer>
        <div class="row">
            <div class="column">
                <h3>WRITE US</h3>
                <ul class="quicklinks">
                    <li class="li3">hi@namlestudio.com</li>
                </ul>
            </div>
            <div class="column">
                <h3>FIND US</h3>
                <ul class="quicklinks">
                    <li class="li2">Guldbergs gade 29N, 2200 København</li>
                </ul>
            </div>
            <div class="column">
                <h3>CONTACT US</h3>
                <ul class="grow">
                    <li class="i1"><img src="img/insta_icon@4x.png" alt=""></li>
                    <li class="i2"><img src="img/fb_icon@4x.png" alt=""></li>
                    <li class="i3"><img src="img/linkedin_icon@4x.png" alt=""></li>
                </ul>
            </div>
        </div>
    </footer>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- JAVASCRIPT -->
    <!----------------------------------------------------------------------------------------------------------------->

    <script>
        let filter = "all";
        let tojs;

        // --- Venter til html'en er loaded --- //

        document.addEventListener("DOMContentLoaded", show);

        const listeToj = document.querySelector("#liste");
        const skabelon = document.querySelector("template").content;

        // --- Fortæller hvilket link der skal hentes info fra --- //

        const url = "http://victoriabuhrmann.dk/kea/eksamen_2.sem/wordpress/wp-json/wp/v2/toj/";

        // --- Henter info --- //

        async function show() {
            const JSONData = await fetch(url);
            tojs = await JSONData.json();

            // console.log(tojs); //

            addEventListenersToButons();

            vis(tojs);
        }

        // --- Fortæller hvilke info der skal hentes og hvor de skal sættes ind --- //

        function vis(toj) {

            listeToj.textContent = "";

            // --- Filterer knapper gennem WP --- //

            tojs.forEach(toj => {
                if (filter == "all" || filter == toj.categories[0]) {

                    // console.log(filter, toj.categories[0]) //

                    // --- WP info --- //

                    const klon = skabelon.cloneNode(true);

                    klon.querySelector(".foto").src = toj.billede.guid;
                    klon.querySelector(".navn").textContent = toj.navn;
                    klon.querySelector(".pris").textContent = toj.pris;
                    klon.querySelector(".toj").addEventListener("click", function() {
                        tojClick(toj.id)
                    });

                    listeToj.appendChild(klon);
                }
            })

        }

        // --- Åbner induvelt produkt i nyt vindu --- //

        function tojClick(id) {
            console.log("ID", id);
            location.href = "Singleview.html?id=" + id;

        }

        // --- Filter knapper --- //

        function addEventListenersToButons() {
            document.querySelectorAll(".filter").forEach((btn) => {
                btn.addEventListener("click", filterBTNs);
            })
        }

        function filterBTNs() {
            filter = this.dataset.kategori;

            document.querySelectorAll(".filter").forEach((btn) => {

                btn.classList.remove("valgt");
            })

            this.classList.add("valgt");

            vis(tojs);
        }
    </script>

    <!----------------------------------------------------------------------------------------------------------------->
    <!-- JAVASCRIPT -->
    <!----------------------------------------------------------------------------------------------------------------->

    <script src="Script.js"></script>

</body></html>
